// The Site library is used to apply site specific changes
var Site = require('./lib/site');

// The Nugget library provides tools for accessing and managing Nuggets.
var Nugget = require('./lib/nugget');


/**
 * The file Node.js will start with when requiring the ActiveRules module.
 */
module.exports =  function (nextApp) {
  return function (req) {
    // Middleware logic goes here
    req.user = {username: 'notduncansmith'};
    
    req.siteConfig = Site.getSiteConfig(req);

    console.log(req.siteConfig);

    // Pass the request along when you're done
    return nextApp(req);
  }    

} 
